<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>ReviewScope - ê²°ê³¼</title>
  <link rel="stylesheet" href="/style.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
<div class="container">

  <!-- ì œëª©: ì‹¤ì œ í‚¤ì›Œë“œ í‘œì‹œ -->
  <h1>
    <span th:text="${keyword}">í‚¤ì›Œë“œ</span> ë¶„ì„ ì™„ë£Œ!
  </h1>

  <!-- ì—ëŸ¬ê°€ ìˆìœ¼ë©´ ì—ëŸ¬ë§Œ ë³´ì—¬ì¤Œ -->
  <div th:if="${error}" class="error" th:text="${error}">ì—ëŸ¬ ë©”ì‹œì§€</div>

  <!-- ì—ëŸ¬ê°€ ì—†ì„ ë•Œ ê²°ê³¼ ì˜ì—­ -->
  <div th:if="${error} == null">

    <!-- ì°¨íŠ¸ -->
    <div style="max-width:400px;margin:0 auto 2rem;">
      <canvas id="chart"></canvas>
    </div>

	<h2>ğŸ“„ ìµœì‹  5ê°œ ê²°ê³¼ íŒŒì¼</h2>
		
		<div class="file-list">
			<div class="file-box" th:each="f : ${recentFiles}">
			  <div class="preview">
			    <pre th:text="${f.preview}"></pre>
			  </div>
			  <div class="meta">
			    <span th:text="${f.size + 'ì | ' + f.date}"></span>
			  </div>
			</div>
		</div>
	</div>
</div>

<script th:inline="javascript">
  const ctx = document.getElementById('chart').getContext('2d');

  // ë‚˜ì¤‘ì— ì‹¤ì œ ê°’ìœ¼ë¡œ êµì²´
  const sentimentData = [48, 35, 17, 0];

  new Chart(ctx, {
    type: 'doughnut',
    data: {
      labels: ['ê¸ì •', 'ë¶€ì •', 'ì¤‘ë¦½', 'ê¸°íƒ€'],
      datasets: [{
        data: sentimentData,
        backgroundColor: ['#4CAF50', '#F44336', '#FF9800', '#9E9E9E'],
        borderWidth: 4,
        borderColor: '#fff'
      }]
    },
    options: {
      responsive: true,
      plugins: {
        title: {
          display: true,
          text: /*[[${keyword}]]*/ 'í‚¤ì›Œë“œ' + ' ê°ì„±ë¶„ì„',
          font: { size: 18 }
        }
      }
    }
  });
</script>
</body>
</html>

