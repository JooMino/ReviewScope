<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>ReviewScope - ë¶„ì„ ê²°ê³¼</title>
    <link href="/style.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>

    <!-- [1] ì¢Œì¸¡ ë©”ë‰´ -->
    <nav class="left-sidebar">
        <div class="brand">Review<span>Scope</span></div>
        <ul class="menu-list">
            <a href="/" class="menu-item">ğŸ  í™ˆ ëŒ€ì‹œë³´ë“œ</a>
            <li class="menu-item active">ğŸ“Š ì‹¬ì¸µ ë¶„ì„</li>
            <li class="menu-item">ğŸ’¬ ì»¤ë®¤ë‹ˆí‹° ë°˜ì‘</li>
            <li class="menu-item">âš™ï¸ ì„¤ì •</li>
        </ul>
    </nav>

    <!-- [2] ì¤‘ì•™ ë©”ì¸ ì˜ì—­ -->
    <main class="main-container">
        <!-- ìƒë‹¨ë°” -->
        <header class="top-bar">
            ğŸ” &nbsp; <span th:text="${keyword}">í‚¤ì›Œë“œ</span> ë¶„ì„ ë¦¬í¬íŠ¸
        </header>

        <div class="feed-area">
            
            <!-- ì—ëŸ¬ ë©”ì‹œì§€ -->
            <div th:if="${error}" style="background:rgba(255,75,75,0.1); color:#ff4b4b; padding:20px; border-radius:12px; margin-bottom:20px;">
                âš ï¸ <span th:text="${error}">ì—ëŸ¬ ë°œìƒ</span>
            </div>

            <div th:if="${error} == null">
                <!-- 1. ê¸ì •/ë¶€ì • ì°¨íŠ¸ ì¹´ë“œ -->
                <div class="content-card">
                    <h2 style="margin-bottom: 15px; font-size: 18px;">ğŸ˜Š ê¸ì • vs ë¶€ì • ì—¬ë¡  ë¹„ìœ¨</h2>
                    <div class="big-chart-box">
                        <!-- ì°¨íŠ¸ ì˜ì—­ -->
                        <div class="chart-wrapper">
                            <canvas id="chart"></canvas>
                        </div>
                        
                        <!-- ë²”ë¡€ ì˜ì—­ -->
                        <div class="chart-legend">
                            <div class="legend-item">
                                <div class="dot" style="background: var(--accent);"></div>
                                <span>ê¸ì •ì ì¸ ì˜ê²¬ (48%)</span>
                            </div>
                            <div class="legend-item">
                                <div class="dot" style="background: var(--accent-red);"></div>
                                <span>ë¶€ì •ì ì¸ ì˜ê²¬ (35%)</span>
                            </div>
                            <div class="legend-item">
                                <div class="dot" style="background: #A0A0A0;"></div>
                                <span>ì¤‘ë¦½/ê¸°íƒ€ (17%)</span>
                            </div>
                            <div style="margin-top: 10px; font-size: 13px; color: #666;">
                                ì´ ìˆ˜ì§‘ ê²Œì‹œê¸€: <strong>5ê±´</strong>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 2. ì‹¤ì‹œê°„ í”¼ë“œ ë¦¬ìŠ¤íŠ¸ -->
                <div class="content-card">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 20px;">
                        <h3 style="font-size:18px;">ğŸ”¥ ì‹¤ì‹œê°„ ìˆ˜ì§‘ ê²°ê³¼</h3>
                        <span style="color: var(--accent); font-size: 13px; cursor: pointer;">ë”ë³´ê¸° ></span>
                    </div>

                    <!-- ê²Œì‹œê¸€ ë°˜ë³µ ì¶œë ¥ -->
                    <div class="post-card" th:each="f : ${recentFiles}">
                        <div class="post-thumb">ğŸ“„</div>
                        <div class="post-info">
                            <!-- íŒŒì¼ ë‚´ìš© ì•ë¶€ë¶„ì„ ì œëª©ì²˜ëŸ¼ ì‚¬ìš© -->
                            <h3 th:text="${#strings.abbreviate(f.preview, 30)}">ì œëª© ë¯¸ë¦¬ë³´ê¸°</h3>
                            <p>
                                <span th:text="${f.date}">2026-02-05</span> | 
                                <span th:text="${f.size} + 'ì'">100ì</span>
                            </p>
                            <p style="margin-top:4px; opacity:0.6;" th:text="${f.preview}">ë‚´ìš© ë¯¸ë¦¬ë³´ê¸°...</p>
                        </div>
                    </div>

                    <!-- ê²°ê³¼ ì—†ì„ ë•Œ -->
                    <div th:if="${#lists.isEmpty(recentFiles)}" style="text-align: center; color: #666; padding: 20px;">
                        ìˆ˜ì§‘ëœ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.
                    </div>
                </div>
            </div>

        </div>
    </main>

    <!-- [3] ìš°ì¸¡ ì‚¬ì´ë“œë°” -->
    <aside class="right-sidebar">
        
        <!-- ìœ„ì ¯: ì—°ê´€ ê²€ìƒ‰ì–´ (ì˜ˆì‹œ) -->
        <div class="widget-card">
            <div class="widget-title">
                <span>ğŸ“± ì—°ê´€ í‚¤ì›Œë“œ</span>
            </div>
            <div class="rank-list">
                <div class="rank-item">
                    <div class="rank-left">
                        <div class="model-icon">1</div>
                        <span>ë°œì—´</span>
                    </div>
                    <span class="percent">42%</span>
                </div>
                <div class="rank-item">
                    <div class="rank-left">
                        <div class="model-icon">2</div>
                        <span>ë°°í„°ë¦¬</span>
                    </div>
                    <span class="percent">28%</span>
                </div>
                <div class="rank-item">
                    <div class="rank-left">
                        <div class="model-icon">3</div>
                        <span>ê°€ê²©</span>
                    </div>
                    <span class="percent">15%</span>
                </div>
            </div>
        </div>

        <!-- ë°°ë„ˆ -->
        <div class="widget-card" style="background: linear-gradient(45deg, #00E0C6, #0078FF); color: white; text-align: center;">
            <h3 style="font-size: 16px;">ReviewScope<br>Pro</h3>
            <p style="font-size: 12px; margin-top: 5px; opacity: 0.9;">ë” ê°•ë ¥í•œ ì¸ì‚¬ì´íŠ¸ë¥¼<br>ê²½í—˜í•´ë³´ì„¸ìš”.</p>
        </div>

    </aside>

    <script th:inline="javascript">
        // ì°¨íŠ¸ ì´ˆê¸°í™”
        const ctx = document.getElementById('chart').getContext('2d');
        const sentimentData = [48, 35, 17, 0]; 

        new Chart(ctx, {
            type: 'doughnut',
            data: {
                labels: ['ê¸ì •', 'ë¶€ì •', 'ì¤‘ë¦½', 'ê¸°íƒ€'],
                datasets: [{
                    data: sentimentData,
                    backgroundColor: ['#00E0C6', '#FF4B4B', '#A0A0A0', '#333333'],
                    borderWidth: 0,
                    hoverOffset: 4
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                cutout: '70%', // ë„ë„› ë‘ê»˜ ì–‡ê²Œ (test.html ìŠ¤íƒ€ì¼)
                plugins: {
                    legend: { display: false } // ë²”ë¡€ëŠ” HTMLë¡œ ì§ì ‘ ê·¸ë ¸ìœ¼ë¯€ë¡œ ìˆ¨ê¹€
                }
            }
        });
    </script>
</body>
</html>

